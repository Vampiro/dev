(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{80:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return s})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return l})),t.d(n,"default",(function(){return b}));var a=t(3),r=t(7),i=(t(0),t(99)),s={id:"knex",title:"Knex"},c={unversionedId:"database/knex",id:"database/knex",isDocsHomePage:!1,title:"Knex",description:"Knex is a query builder for databases. It can create and query tables.",source:"@site/docs/database/knex.md",slug:"/database/knex",permalink:"/dev/docs/database/knex",editUrl:"https://github.com/vampiro/dev/edit/master/website/docs/database/knex.md",version:"current",sidebar:"someSidebar",previous:{title:"Koa",permalink:"/dev/docs/server/koa"},next:{title:"Auth0",permalink:"/dev/docs/auth/auth0"}},l=[{value:"Installation",id:"installation",children:[]},{value:"Configuration",id:"configuration",children:[]},{value:"Create Table",id:"create-table",children:[]},{value:"Package.json scripts",id:"packagejson-scripts",children:[]}],o={toc:l};function b(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},o,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Knex is a query builder for databases. It can create and query tables."),Object(i.b)("h2",{id:"installation"},"Installation"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"npm install knex rimraf ts-node\n")),Object(i.b)("h2",{id:"configuration"},"Configuration"),Object(i.b)("p",null,"Create a file called ",Object(i.b)("inlineCode",{parentName:"p"},"knex.ts"),". Replace ",Object(i.b)("inlineCode",{parentName:"p"},"YOUR_DATABASE_NAME"),"."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-ts"},'// knex.ts\nimport knex from "knex";\n\nexport default knex({\n  client: "sqlite3",\n  connection: {\n    filename: "./YOUR_DATABASE_NAME.sqlite",\n  },\n  useNullAsDefault: true,\n});\n')),Object(i.b)("h2",{id:"create-table"},"Create Table"),Object(i.b)("p",null,"Create a file called ",Object(i.b)("inlineCode",{parentName:"p"},"createTable.ts"),"."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-ts"},'// createTable.ts\nimport { exit } from "process";\nimport knex from "./knex";\n\nasync function createTables() {\n  try {\n    console.log("Creating User table.");\n    await knex.schema.createTable("User", (table) => {\n      table.string("id").primary();\n      table.string("firstName");\n    });\n\n    exit();\n  } catch (e) {\n    console.error(e);\n    exit();\n  }\n}\n\ncreateTables();\n')),Object(i.b)("h2",{id:"packagejson-scripts"},"Package.json scripts"),Object(i.b)("p",null,"In your ",Object(i.b)("inlineCode",{parentName:"p"},"package.json"),", insert these into the ",Object(i.b)("inlineCode",{parentName:"p"},"scripts")," sections:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'"db-create": "npm run db-drop && ts-node ./createTables.ts",\n"db-drop": "rimraf ./YOUR_DATABASE_NAME.sqlite"\n')))}b.isMDXComponent=!0}}]);